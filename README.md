# Remote_dictionary
Remote_dictionary (удалённый словарь) - сетевое приложение для доступа к словарю (хранилище вида "ключ - значение") по TCP-соединению. Сервер асинхронный, однопоточный.
## Использование
Программа поддерживает следующие команды:
### PUT
PUT "key" "value" - сохранить пару "ключ - значение".
Примеры ответов приложения:
* PUT key1 val1 - OK (Ключа key1 на момент отправки команды не было в словаре)
* PUT key1 val2 - OK val1 (В словаре уже была пара с ключом key1)
### GET
GET "key" - получить значение по ключу.
Примеры ответов приложения:
* GET key1 - OK val2 (В словаре уже была пара с ключом key1)
* GET key2 - NE (Ключа key2 на момент отправки команды не было в словаре)
### DEL
DEL "key" - удалить пару по ключу.
* DEL key1 - OK val2 (В словаре уже была пара с ключом key1)
* DEL key2 - NE (Ключа key2 на момент отправки команды не было в словаре)
### COUNT
COUNT - посчитать количество пар в словаре. 
* COUNT - 0 (в словаре нет пар)
### DUMP
DUMP "filename" - сохранить содержимое словаря в заданный файл.
* DUMP dictionary.txt - DUMP OK
 
Если пользователь ввёдет любую неверную команду (которая не будет соответствовать регулярному выражению "^PUT ([a-zA-Z0-9]+) ([a-zA-Z0-9]+)$|^DEL ([a-zA-Z0-9]+)$|^COUNT$|DUMP ([a-zA-Z0-9.]+)$|^GET ([a-zA-Z0-9]+)$"), сервер отправит сообщение "Wrong command" об этом.
## Зависимости
* Boost::asio, Boost::program_options - работа с сетью, с аргументами командной строки.
* Spdlog - логирование
* GTest - тестирование

## Установка
Клонирование репозитория (понадобится утилита git):
```
git clone https://github.com/mantsevat/remote_dictionary
```
Так же можно скачать архив с Github.

Для проекта нужны:
* компилятор, поддерживающий C++17(gcc версии 9 точно подойдёт)
* cmake версии >= 3.14
* make версии >= 4.2.1.

Перед сборкой в папке проекта будут установлены вышеупомянутые зависимости.
Команды для сборки:
```
cd remote_dictionary/src/server/
cmake .
make
```
Варианты сборки: 
* Уровень логирования debug:
```
cmake . -DDEBUG
```
* Тесты (и их запуск):
```
 cmake . -DBUILD_WITH_TESTS=ON.
 cd tests
 make
 ./unit_tests
```
## Запуск
Для запуска используются следующие опции:
*  -p, --port - указание порта. Значение от 1 до 65535. Для значений от 1 до 1023 потребуется запуск с sudo.
*  -l, --limit - указание максимального количества подключений (от 1 до 100)
*  -f, --file - указание файла для инициализации словаря(символы после пробела будут проигнорированы). Содержимое файла должно состоять из пар вида ключ - значение. Если чтение окажется неудачным, то придётся перезапустить программу
*  -d, --default - запуск по умолчанию. Порт -  8888, максимальное количество подключений - 20.  
Пример:  
```
./server -p 2288 -l 10
```
Так же можно получить справку об опциях, запустив программу с флагами --help, -h.
